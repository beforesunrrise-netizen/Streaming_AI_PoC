# 다음 금융 투자 챗봇 - GPT 스타일 대화 기능 추가 완료! 🎉

## 📝 변경 사항

### 1. **새로운 파일 추가**
- `conversation.py`: GPT처럼 자연스러운 대화를 처리하는 모듈

### 2. **주요 기능**

#### ✅ 일반 대화 감지
챗봇이 이제 다음을 자동으로 인식합니다:
- **인사**: "안녕", "하이", "반가워"
- **감사**: "고마워", "감사합니다", "땡큐"
- **질문**: "어떻게", "무엇", "왜"
- **짧은 메시지**: 5자 미만의 간단한 대화

#### ✅ 대화 맥락 유지
- 최근 6개 메시지 (3회 대화)를 기억
- 현재 종목 컨텍스트 인식
- 자연스러운 후속 질문 처리

#### ✅ LLM 기반 응답 (선택 가능)
- Claude 또는 GPT 사용
- 친근하고 도움되는 톤
- 2-3문장의 간결한 답변
- 적절한 이모지 사용 😊

### 3. **사용 예시**

```
👤 사용자: 안녕?
🤖 챗봇: 안녕하세요! 다음 금융 투자 챗봇입니다. 😊
         종목 정보, 시세, 뉴스 등을 확인할 수 있어요. 무엇을 도와드릴까요?

👤 사용자: 삼성전자 주가는?
🤖 챗봇: [종목 정보 제공...]

👤 사용자: 고마워!
🤖 챗봇: 천만에요! 😊 다른 궁금한 점이 있으시면 언제든 물어보세요.

👤 사용자: 도움말 보여줘
🤖 챗봇: **💡 사용 가이드**
         
         이렇게 물어보세요:
         - "삼성전자 주가는?" (시세 확인)
         - "네이버 뉴스 보여줘" (뉴스 확인)
         ...
```

### 4. **기술적 세부사항**

#### conversation.py 주요 함수:
1. `is_general_conversation()` - 일반 대화 여부 판단
2. `generate_conversational_response()` - LLM 기반 자연스러운 응답 생성
3. `_generate_fallback_response()` - LLM 없이도 작동하는 기본 응답

#### app_chat.py 변경사항:
- 입력 처리 로직 분기:
  - 일반 대화 → `generate_conversational_response()` 호출
  - 종목 질의 → 기존 `_process_stock_query()` 호출
- `_process_stock_query()` 함수로 종목 관련 로직 분리

### 5. **호환성**
- ✅ LLM 사용 안 함: 기본 템플릿 응답 사용
- ✅ LLM 사용 (Anthropic Claude): 자연스러운 대화
- ✅ LLM 사용 (OpenAI GPT): 자연스러운 대화
- ✅ 기존 종목 검색 기능: 100% 유지

### 6. **설정 방법**

`.streamlit/secrets.toml` 또는 `.env` 파일에:
```toml
# LLM API 키 (선택 사항)
ANTHROPIC_API_KEY = "your-key-here"
# 또는
OPENAI_API_KEY = "your-key-here"
```

사이드바에서 "🤖 AI 답변 사용" 체크박스로 on/off 가능!

## 🎯 결과

이제 다음 금융 투자 챗봇이 **ChatGPT처럼** 자연스럽게 대화하면서도, 
종목 정보는 **다음 금융 데이터**로 정확하게 답변합니다! 🚀

---

**테스트해보세요!**
```bash
streamlit run app_chat.py
```
